<!DOCTYPE html>
<html xmlns:th="http://www.thymeleleaf.org">

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">

<title>Bootstrap Admin Template</title>
<link rel="shortcut icon" href="img/favicon.ico">

<!-- global stylesheets -->
<link href="https://fonts.googleapis.com/css?family=Roboto+Condensed"
	rel="stylesheet">
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet"
	href="font-awesome-4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="css/font-icon-style.css">
<link rel="stylesheet" href="css/style.default.css"
	id="theme-stylesheet">

<!-- Core stylesheets -->
<link rel="stylesheet" href="css/ui-elements/card.css">
<link rel="stylesheet" href="css/style.css">
<style>
img {
	width: 300px;
	height: 300px;
	border: 1px solid #eee;
}
</style>
</head>

<body>

	<!--====================================================
                         MAIN NAVBAR
======================================================-->
	<header class="header">
		<nav class="navbar navbar-expand-lg" style="z-index: 20">
			<div class="search-box">
				<button class="dismiss">
					<i class="icon-close"></i>
				</button>
				<form id="searchForm" action="#" role="search">
					<input type="search" placeholder="Search Now" class="form-control">
				</form>
			</div>
			<div class="container-fluid ">
				<div
					class="navbar-holder d-flex align-items-center justify-content-between">
					<div class="navbar-header">
						<a href="index.html" class="navbar-brand">
							<div class="brand-text brand-big hidden-lg-down">
								<img src="img/logo-white.png" alt="Logo" class="img-fluid">
							</div>
							<div class="brand-text brand-small">
								<img src="img/logo-icon.png" alt="Logo" class="img-fluid">
							</div>
						</a> <a id="toggle-btn" href="#" class="menu-btn active"> <span></span>
							<span></span> <span></span>
						</a>
					</div>
				</div>
			</div>
		</nav>
	</header>

	<!--====================================================
                        PAGE CONTENT
======================================================-->
	<div class="page-content d-flex align-items-stretch">

		<!--***** SIDE NAVBAR *****-->
		<nav class="side-navbar">
			<div class="sidebar-header d-flex align-items-center">
				<div class="avatar">
					<img src="img/avatar-1.jpg" alt="..."
						class="img-fluid rounded-circle">
				</div>
				<div class="title">
					<h1 class="h4">Admin</h1>
				</div>
			</div>
			<hr>
			<!-- Sidebar Navidation Menus-->
			<ul class="list-unstyled">
				<li class="active"><a href="index.html"><i
						class="icon-home"></i>Home</a></li>
				<li><a href="#apps" aria-expanded="false"
					data-toggle="collapse"> <i class="icon-interface-windows"></i>Apps
				</a>
					<ul id="apps" class="collapse list-unstyled">
						<li><a href="calendar.html">Calendar</a></li>
						<li><a href="email.html">Email</a></li>
						<li><a href="media.html">Media</a></li>
						<li><a href="invoice.html">Invoice</a></li>
					</ul></li>
				<li><a href="chart.html"> <i class="fa fa-bar-chart"></i>Chart
				</a></li>
				<li><a href="#forms" aria-expanded="false"
					data-toggle="collapse"> <i class="fa fa-building-o"></i>Forms
				</a>
					<ul id="forms" class="collapse list-unstyled">
						<li><a href="basic-form.html">Basic Form</a></li>
						<li><a href="form-layouts.html">Form Layouts</a></li>
					</ul></li>
				<li><a href="maps.html"> <i class="fa fa-map-o"></i>Maps
				</a></li>
				<li><a href="#pages" aria-expanded="false"
					data-toggle="collapse"> <i class="fa fa-file-o"></i>Pages
				</a>
					<ul id="pages" class="collapse list-unstyled">
						<li><a href="faq.html">FAQ</a></li>
						<li><a href="empty.html">Empty</a></li>
						<li><a href="gallery.html">Gallery</a></li>
						<li><a href="login.html">Log In</a></li>
						<li><a href="register.html">Register</a></li>
						<li><a href="search-result.html">Search Result</a></li>
						<li><a href="404.html">404</a></li>
					</ul></li>
				<li><a href="tables.html"> <i class="icon-grid"></i>Tables
				</a></li>
				<li><a href="#elements" aria-expanded="false"
					data-toggle="collapse"> <i class="fa fa-globe"></i>UI Elements
				</a>
					<ul id="elements" class="collapse list-unstyled">
						<li><a href="ui-buttons.html">Buttons</a></li>
						<li><a href="ui-cards.html">Cards</a></li>
						<li><a href="ui-progressbars.html">Progress Bar</a></li>
						<li><a href="ui-timeline.html">Timeline</a></li>
					</ul></li>
			</ul>
			<span class="heading">Extras</span>
			<ul class="list-unstyled">
				<li><a href="#"> <i class="icon-picture"></i>Demo
				</a></li>
			</ul>
		</nav>

		<div class="content-inner">
			<div class="row justify-content-end  mr-1"
				style="box-sizing: border-box">
				<button type="button" data-toggle="modal" data-target="#addModal"
					class="btn btn-primary mb-2">增加图书信息</button>

			</div>
			<table class="table table-sm" style="background-color: white;">
				<thead>
					<tr>
						<th scope="col">ID</th>
						<th scope="col">书名</th>
						<th scope="col">图片</th>
						<th scope="col">指数</th>
						<th scope="col">作者</th>
						<th scope="col">出版社</th>
						<th scope="col">出版时间</th>
						<th scope="col">摘要</th>
						<th scope="col">分类</th>
						<th scope="col">操作</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="book : ${books}">
						<td th:text="${book.bookId}"></td>
						<td th:text="${book.bookName}"></td>
						<td><img alt="" th:src="${book.bookImageUrl}"
							style="width: 60px; height: 80px"></td>
						<td th:text="${book.bookIndex}"></td>
						<td th:text="${book.bookAuthor}"></td>
						<td th:text="${book.bookPublishHouse}"></td>
						<td th:text="${book.bookPublishTime}"></td>
						<td th:text="${book.bookAbstract}"></td>
						<td th:text="${book.bootCategory}"></td>
						<td>
							<button type="button" class="btn btn-dark">修改</button>&nbsp;
							<a type="button" class="btn btn-danger" th:href="@{'/deletebook/'+${book.bookId}}">删除</a>
						</td>
					</tr>

				</tbody>
			</table>

		</div>
		<!-- private int bookId;
	private String bookName;
	private String bookIndex;
	private String bookAuthor;
	private String bookPublishHouse;
	private Date bookPublishTime;
	private String bookAbstract;
	private int bootCategory; -->

		<div id="addModal" class="modal fade" tabindex="-1" role="dialog"
			aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<div class="modal-content" style="padding: 32px">
					<form id="formdata" enctype="multipart/form-data"
						action="/admin/addbook" method="POST">
						<div class="form-group row">
							<label for="bookName" class="col-sm-2 col-form-label">书籍名称:</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="bookName"
									name="bookName" placeholder="书籍名称">
							</div>
						</div>
						<div class="form-group row">
							<label for="bookIndex" class="col-sm-2 col-form-label">欢迎指数:</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="bookIndex"
									name="bookIndex" placeholder="欢迎指数">
							</div>
						</div>
						<div class="form-group row">
							<label for="bookAuthor" class="col-sm-2 col-form-label">书籍作者:</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="bookAuthor"
									name="bookAuthor" placeholder="书籍作者">
							</div>
						</div>

						<div class="form-group row">
							<label for="bookPublishHouse" class="col-sm-2 col-form-label">出版社:</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="bookPublishHouse"
									name="bookPublishHouse" placeholder="出版社:">
							</div>
						</div>

						<div class="form-group row">
							<label for="bookPublishTime" class="col-sm-2 col-form-label">出版时间:</label>
							<div class="col-sm-10">
								<input type="date" class="form-control" id="bookPublishTime"
									name="bookPublishTime" placeholder="出版时间:">
							</div>
						</div>

						<div class="form-group row">
							<label for="bookAbstract" class="col-sm-2 col-form-label">摘要:</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="bookAbstract"
									name="bookAbstract" placeholder="摘要">
							</div>
						</div>

						<div class="form-group row">
							<label for="bootCategory" class="col-sm-2 col-form-label">分类:</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="bootCategory"
									name="bootCategory" placeholder="分类	">
							</div>
						</div>
						<div class="form-group row">
							<label for="uploadImage" class="col-sm-2 col-form-label">图片:</label>
							<div class="col-sm-8">
								<input type="file" class="form-control" id="file" name="file">
							</div>
							<button class="col-sm-2 btn btn-info" type="button">上传</button>
						</div>
						<div class="form-group row">
							<label for="bookImageUrl" class="col-sm-2 col-form-label">图片预览:</label>
							<div class="col-sm-10">
								<img id="imgurl" alt="" /> <input type="text" hidden
									name="bookImageUrl" value="">
							</div>
						</div>
						<div style="text-align: center">
							<input type="submit" class="btn btn-success"></input>
						</div>
					</form>
				</div>
			</div>
		</div>

	</div>

	<!--Global Javascript -->
	<script src="js/jquery.min.js"></script>
	<script src="js/popper/popper.min.js"></script>
	<script src="js/tether.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.cookie.js"></script>
	<script src="js/jquery.validate.min.js"></script>
	<script src="js/chart.min.js"></script>
	<script src="js/front.js"></script>
	<script type="text/javascript">
		$(function() {
			$(".btn-info").click(() => {
				$.ajax({
					url:"/uploadFile",
					type:"POST",
					processData:false,  //tell jQuery not to process the data
	                contentType: false,  //tell jQuery not to set contentType
	               	data:new FormData($("#formdata")[0]),
					success:function(data) {
						$("#imgurl").attr("src", data);
						$("[name=bookImageUrl]").attr("value",data)
					}
					
				})
			})
		})
	</script>
</body>

</html>